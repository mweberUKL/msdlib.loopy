\hypertarget{protocol_8h}{\section{src/medium/protocol/protocol.h File Reference}
\label{protocol_8h}\index{src/medium/protocol/protocol.\-h@{src/medium/protocol/protocol.\-h}}
}


Protocol encoder and decoder.  


{\ttfamily \#include \char`\"{}../../constants.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../message.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}protocol\-\_\-v1.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{protocol_8h_ac9003344c26436ca969c471d05654673}{decode\-\_\-header} (int first)
\begin{DoxyCompactList}\small\item\em Delegates calls to the respective protocol decoder for the protocol version the message was sent with. \end{DoxyCompactList}\item 
struct \hyperlink{structMessage}{Message} $\ast$ \hyperlink{protocol_8h_a1fa95c84f496c2887979babae0757312}{encode\-\_\-ack} (unsigned char pid, unsigned int count)
\begin{DoxyCompactList}\small\item\em Delegates calls to the respective protocol encoder for the protocol version the acknowledgment should be encoded with. \end{DoxyCompactList}\item 
struct \hyperlink{structMessage}{Message} $\ast$ \hyperlink{protocol_8h_a6cdbef609d9e1081785db1fe4a54511f}{encode\-\_\-poll} (unsigned char pid)
\begin{DoxyCompactList}\small\item\em Delegates calls to the respective protocol encoder for the protocol version the poll should be encoded with. \end{DoxyCompactList}\item 
struct \hyperlink{structMessage}{Message} $\ast$ \hyperlink{protocol_8h_a3d495b6e06db4018bdfd6d305bce209b}{encode\-\_\-gpio} (unsigned char gid, unsigned char val)
\begin{DoxyCompactList}\small\item\em Delegates calls to the respective protocol encoder for the protocol version the gpio data message should be encoded with. \end{DoxyCompactList}\item 
struct \hyperlink{structMessage}{Message} $\ast$ \hyperlink{protocol_8h_adaa4541675bb839827ae390b4df873c5}{encode\-\_\-debug} (unsigned char type, unsigned int size)
\begin{DoxyCompactList}\small\item\em Delegates calls to the respective protocol encode for the protocol version the debug message should be encoded with. \end{DoxyCompactList}\item 
struct \hyperlink{structMessage}{Message} $\ast$ \hyperlink{protocol_8h_af4e980afaa870ce41186e63317663e40}{encode\-\_\-data} (unsigned char pid, unsigned int size)
\begin{DoxyCompactList}\small\item\em Delegates calls to the respective protocol encoder for the protocol version the data message should be encoded with. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Protocol encoder and decoder. Delegates calls to the respective protocol decoder for the protocol version the message was sent with. The protocol version is always stored in the same field of the header. Calls to encoder procedures are delegated to an encoder of the protocol version stored in the constants file (which has been specified by the user).

\begin{DoxyAuthor}{Author}
Thomas Fischer 
\end{DoxyAuthor}
\begin{DoxySince}{Since}
01.\-02.\-2013 
\end{DoxySince}


\subsection{Function Documentation}
\hypertarget{protocol_8h_ac9003344c26436ca969c471d05654673}{\index{protocol.\-h@{protocol.\-h}!decode\-\_\-header@{decode\-\_\-header}}
\index{decode\-\_\-header@{decode\-\_\-header}!protocol.h@{protocol.\-h}}
\subsubsection[{decode\-\_\-header}]{\setlength{\rightskip}{0pt plus 5cm}int decode\-\_\-header (
\begin{DoxyParamCaption}
\item[{int}]{first}
\end{DoxyParamCaption}
)}}\label{protocol_8h_ac9003344c26436ca969c471d05654673}


Delegates calls to the respective protocol decoder for the protocol version the message was sent with. 

The protocol version is always stored in the same field of the header. This method will issue further reads on the medium, depending on the message. 
\begin{DoxyParams}{Parameters}
{\em first} & The first integer of the message (which H\-A\-S to be part of the header). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if decoding was successful, 1 otherwise.
\end{DoxyReturn}
Delegates calls to the respective protocol decoder for the protocol version the message was sent with.

Reads parts of the message from the medium using recv\-\_\-int(). \hypertarget{protocol_8h_a1fa95c84f496c2887979babae0757312}{\index{protocol.\-h@{protocol.\-h}!encode\-\_\-ack@{encode\-\_\-ack}}
\index{encode\-\_\-ack@{encode\-\_\-ack}!protocol.h@{protocol.\-h}}
\subsubsection[{encode\-\_\-ack}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Message}$\ast$ encode\-\_\-ack (
\begin{DoxyParamCaption}
\item[{unsigned char}]{pid, }
\item[{unsigned int}]{count}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [read]}}}\label{protocol_8h_a1fa95c84f496c2887979babae0757312}


Delegates calls to the respective protocol encoder for the protocol version the acknowledgment should be encoded with. 


\begin{DoxyParams}{Parameters}
{\em pid} & Id of the port, which acknowledges data. \\
\hline
{\em count} & Number of (integer) values, that are acknowledged. Has to be below protocol\-\_\-max\-\_\-size! \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to an empty message with the generated header. 
\end{DoxyReturn}
\hypertarget{protocol_8h_af4e980afaa870ce41186e63317663e40}{\index{protocol.\-h@{protocol.\-h}!encode\-\_\-data@{encode\-\_\-data}}
\index{encode\-\_\-data@{encode\-\_\-data}!protocol.h@{protocol.\-h}}
\subsubsection[{encode\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Message}$\ast$ encode\-\_\-data (
\begin{DoxyParamCaption}
\item[{unsigned char}]{pid, }
\item[{unsigned int}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [read]}}}\label{protocol_8h_af4e980afaa870ce41186e63317663e40}


Delegates calls to the respective protocol encoder for the protocol version the data message should be encoded with. 


\begin{DoxyParams}{Parameters}
{\em pid} & Id of the port, from which the message is originated. \\
\hline
{\em size} & Size of the message in 4-\/byte blocks (i.\-e. count of integer values). Has to be below protocol\-\_\-max\-\_\-size! \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to an empty message with the generated header. 
\end{DoxyReturn}
\hypertarget{protocol_8h_adaa4541675bb839827ae390b4df873c5}{\index{protocol.\-h@{protocol.\-h}!encode\-\_\-debug@{encode\-\_\-debug}}
\index{encode\-\_\-debug@{encode\-\_\-debug}!protocol.h@{protocol.\-h}}
\subsubsection[{encode\-\_\-debug}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Message}$\ast$ encode\-\_\-debug (
\begin{DoxyParamCaption}
\item[{unsigned char}]{type, }
\item[{unsigned int}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [read]}}}\label{protocol_8h_adaa4541675bb839827ae390b4df873c5}


Delegates calls to the respective protocol encode for the protocol version the debug message should be encoded with. 


\begin{DoxyParams}{Parameters}
{\em type} & Debug type of the message. \\
\hline
{\em size} & Size of the debug message. Has to be below protocol\-\_\-max\-\_\-size! \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to an empty message with the generated header. 
\end{DoxyReturn}
\hypertarget{protocol_8h_a3d495b6e06db4018bdfd6d305bce209b}{\index{protocol.\-h@{protocol.\-h}!encode\-\_\-gpio@{encode\-\_\-gpio}}
\index{encode\-\_\-gpio@{encode\-\_\-gpio}!protocol.h@{protocol.\-h}}
\subsubsection[{encode\-\_\-gpio}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Message}$\ast$ encode\-\_\-gpio (
\begin{DoxyParamCaption}
\item[{unsigned char}]{gid, }
\item[{unsigned char}]{val}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [read]}}}\label{protocol_8h_a3d495b6e06db4018bdfd6d305bce209b}


Delegates calls to the respective protocol encoder for the protocol version the gpio data message should be encoded with. 


\begin{DoxyParams}{Parameters}
{\em gid} & Id of the gpio component. \\
\hline
{\em val} & The new state of the gpio component. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to an empty message with the generated header. 
\end{DoxyReturn}
\hypertarget{protocol_8h_a6cdbef609d9e1081785db1fe4a54511f}{\index{protocol.\-h@{protocol.\-h}!encode\-\_\-poll@{encode\-\_\-poll}}
\index{encode\-\_\-poll@{encode\-\_\-poll}!protocol.h@{protocol.\-h}}
\subsubsection[{encode\-\_\-poll}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf Message}$\ast$ encode\-\_\-poll (
\begin{DoxyParamCaption}
\item[{unsigned char}]{pid}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [read]}}}\label{protocol_8h_a6cdbef609d9e1081785db1fe4a54511f}


Delegates calls to the respective protocol encoder for the protocol version the poll should be encoded with. 


\begin{DoxyParams}{Parameters}
{\em pid} & Id of the port, which is polled. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to an empty message with the generated header. 
\end{DoxyReturn}
