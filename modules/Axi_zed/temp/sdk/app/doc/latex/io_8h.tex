\hypertarget{io_8h}{\section{src/io.h File Reference}
\label{io_8h}\index{src/io.\-h@{src/io.\-h}}
}


Wrapper to encapsulate io operations of the board-\/side driver.  


{\ttfamily \#include \char`\"{}constants.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}queue\-Untyped.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{io_8h_ae733fe874122894bac75e1be37326ceb}{void \hyperlink{io_8h_ae733fe874122894bac75e1be37326ceb}{init\-\_\-queue} ()}\label{io_8h_ae733fe874122894bac75e1be37326ceb}

\begin{DoxyCompactList}\small\item\em Initialises the software queues on the microblaze. \end{DoxyCompactList}\item 
void \hyperlink{io_8h_a39e1d414a410b570cf16faefe8d517e0}{recv\-\_\-message} (unsigned char pid, int payload\mbox{[}$\,$\mbox{]}, unsigned int size)
\begin{DoxyCompactList}\small\item\em Process an incoming data package. \end{DoxyCompactList}\item 
void \hyperlink{io_8h_a12f54d4bfb065f59a678e1506785cbbc}{send\-\_\-poll} (unsigned char pid)
\begin{DoxyCompactList}\small\item\em Sends a poll for more data to the host-\/side driver. \end{DoxyCompactList}\item 
void \hyperlink{io_8h_a7e7724a44ae2e208c8e50af5bf1daa4d}{send\-\_\-gpio} (unsigned char gid, unsigned char val)
\begin{DoxyCompactList}\small\item\em Sends the state of a gpio component to the host-\/side driver. \end{DoxyCompactList}\item 
int \hyperlink{io_8h_ad6d59e98ee169eeaab0c6cc64db1ed68}{flush\-\_\-queue} (unsigned char pid)
\begin{DoxyCompactList}\small\item\em Flushes the software output queue and sends its contents to the host-\/side client. \end{DoxyCompactList}\item 
void \hyperlink{io_8h_aec0ff9a7b47f938b6efaaf0b219cf909}{send\-\_\-debug} (unsigned char type, const char $\ast$format,...)
\begin{DoxyCompactList}\small\item\em Sends a debug message to the host-\/side driver. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{io_8h_a20c067c0ae322e52c93a0da87ec16d07}{\hyperlink{structQueue}{Queue} $\ast$ \hyperlink{io_8h_a20c067c0ae322e52c93a0da87ec16d07}{in\-Queue} \mbox{[}\hyperlink{constants_8h_ae0c19c986d2613068105f2e6b01fc449}{I\-N\-\_\-\-S\-T\-R\-E\-A\-M\-\_\-\-C\-O\-U\-N\-T}\mbox{]}}\label{io_8h_a20c067c0ae322e52c93a0da87ec16d07}

\begin{DoxyCompactList}\small\item\em Microblaze input queues. \end{DoxyCompactList}\item 
\hypertarget{io_8h_aa67e2656c71b8315cc6f7b891e240f0b}{int \hyperlink{io_8h_aa67e2656c71b8315cc6f7b891e240f0b}{out\-Queue} \mbox{[}\hyperlink{constants_8h_aa6213bee9e9bfc3f84616da041122993}{M\-A\-X\-\_\-\-O\-U\-T\-\_\-\-S\-W\-\_\-\-Q\-U\-E\-U\-E\-\_\-\-S\-I\-Z\-E}\mbox{]}}\label{io_8h_aa67e2656c71b8315cc6f7b891e240f0b}

\begin{DoxyCompactList}\small\item\em Microblaze output queue. \end{DoxyCompactList}\item 
\hypertarget{io_8h_ad49f901e159fb12983c42de24f66c9ae}{int \hyperlink{io_8h_ad49f901e159fb12983c42de24f66c9ae}{out\-Queue\-Cap} \mbox{[}\hyperlink{constants_8h_a192c75f93073e94ca3228caf8bea85e8}{O\-U\-T\-\_\-\-S\-T\-R\-E\-A\-M\-\_\-\-C\-O\-U\-N\-T}\mbox{]}}\label{io_8h_ad49f901e159fb12983c42de24f66c9ae}

\begin{DoxyCompactList}\small\item\em capacity of the output queues \end{DoxyCompactList}\item 
\hypertarget{io_8h_a851dbd4483c9084f858c3858154bc4b4}{int \hyperlink{io_8h_a851dbd4483c9084f858c3858154bc4b4}{is\-Polling} \mbox{[}\hyperlink{constants_8h_a192c75f93073e94ca3228caf8bea85e8}{O\-U\-T\-\_\-\-S\-T\-R\-E\-A\-M\-\_\-\-C\-O\-U\-N\-T}\mbox{]}}\label{io_8h_a851dbd4483c9084f858c3858154bc4b4}

\begin{DoxyCompactList}\small\item\em stores if the port is a polling port \end{DoxyCompactList}\item 
\hypertarget{io_8h_a3a2639a6d1fc07f6af0d2d16c250c230}{unsigned int \hyperlink{io_8h_a3a2639a6d1fc07f6af0d2d16c250c230}{poll\-Count} \mbox{[}\hyperlink{constants_8h_a192c75f93073e94ca3228caf8bea85e8}{O\-U\-T\-\_\-\-S\-T\-R\-E\-A\-M\-\_\-\-C\-O\-U\-N\-T}\mbox{]}}\label{io_8h_a3a2639a6d1fc07f6af0d2d16c250c230}

\begin{DoxyCompactList}\small\item\em current poll counter of the port \end{DoxyCompactList}\item 
int \hyperlink{io_8h_ab88f6d9b1d25a690a29400b647e8f014}{out\-Queue\-Size}
\begin{DoxyCompactList}\small\item\em current size of the output queue \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Wrapper to encapsulate io operations of the board-\/side driver. Contains wrapper procedures for communication with the host-\/side driver over the medium on the one hand and vhdl components on the board over axi-\/stream.

\begin{DoxyAuthor}{Author}
Thomas Fischer 
\end{DoxyAuthor}
\begin{DoxySince}{Since}
27.\-02.\-2013 
\end{DoxySince}


\subsection{Function Documentation}
\hypertarget{io_8h_ad6d59e98ee169eeaab0c6cc64db1ed68}{\index{io.\-h@{io.\-h}!flush\-\_\-queue@{flush\-\_\-queue}}
\index{flush\-\_\-queue@{flush\-\_\-queue}!io.h@{io.\-h}}
\subsubsection[{flush\-\_\-queue}]{\setlength{\rightskip}{0pt plus 5cm}int flush\-\_\-queue (
\begin{DoxyParamCaption}
\item[{unsigned char}]{pid}
\end{DoxyParamCaption}
)}}\label{io_8h_ad6d59e98ee169eeaab0c6cc64db1ed68}


Flushes the software output queue and sends its contents to the host-\/side client. 

This does neither influence input queues nor the hardware output queues for any port. 
\begin{DoxyParams}{Parameters}
{\em pid} & The port, of which data is currently stored in the output queue. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful, 1 otherwise. A failure might occur due to problems while sending the contents of the queue over the medium. 
\end{DoxyReturn}
\hypertarget{io_8h_a39e1d414a410b570cf16faefe8d517e0}{\index{io.\-h@{io.\-h}!recv\-\_\-message@{recv\-\_\-message}}
\index{recv\-\_\-message@{recv\-\_\-message}!io.h@{io.\-h}}
\subsubsection[{recv\-\_\-message}]{\setlength{\rightskip}{0pt plus 5cm}void recv\-\_\-message (
\begin{DoxyParamCaption}
\item[{unsigned char}]{pid, }
\item[{int}]{payload\mbox{[}$\,$\mbox{]}, }
\item[{unsigned int}]{size}
\end{DoxyParamCaption}
)}}\label{io_8h_a39e1d414a410b570cf16faefe8d517e0}


Process an incoming data package. 

This procedure forwards the received data to a vhdl component over axi stream. 
\begin{DoxyParams}{Parameters}
{\em pid} & Target port, for which the message is intended. \\
\hline
{\em payload} & Data that is sent to the component. \\
\hline
{\em size} & Number of values sent to the component. \\
\hline
\end{DoxyParams}
\hypertarget{io_8h_aec0ff9a7b47f938b6efaaf0b219cf909}{\index{io.\-h@{io.\-h}!send\-\_\-debug@{send\-\_\-debug}}
\index{send\-\_\-debug@{send\-\_\-debug}!io.h@{io.\-h}}
\subsubsection[{send\-\_\-debug}]{\setlength{\rightskip}{0pt plus 5cm}void send\-\_\-debug (
\begin{DoxyParamCaption}
\item[{unsigned char}]{type, }
\item[{const char $\ast$}]{format, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{io_8h_aec0ff9a7b47f938b6efaaf0b219cf909}


Sends a debug message to the host-\/side driver. 


\begin{DoxyParams}{Parameters}
{\em type} & Debug type of the message. \\
\hline
{\em format} & Format string of the message. \\
\hline
\end{DoxyParams}
\hypertarget{io_8h_a7e7724a44ae2e208c8e50af5bf1daa4d}{\index{io.\-h@{io.\-h}!send\-\_\-gpio@{send\-\_\-gpio}}
\index{send\-\_\-gpio@{send\-\_\-gpio}!io.h@{io.\-h}}
\subsubsection[{send\-\_\-gpio}]{\setlength{\rightskip}{0pt plus 5cm}void send\-\_\-gpio (
\begin{DoxyParamCaption}
\item[{unsigned char}]{gid, }
\item[{unsigned char}]{val}
\end{DoxyParamCaption}
)}}\label{io_8h_a7e7724a44ae2e208c8e50af5bf1daa4d}


Sends the state of a gpio component to the host-\/side driver. 


\begin{DoxyParams}{Parameters}
{\em gid} & Id of the gpio component. \\
\hline
{\em val} & State of the gpio component. \\
\hline
\end{DoxyParams}
\hypertarget{io_8h_a12f54d4bfb065f59a678e1506785cbbc}{\index{io.\-h@{io.\-h}!send\-\_\-poll@{send\-\_\-poll}}
\index{send\-\_\-poll@{send\-\_\-poll}!io.h@{io.\-h}}
\subsubsection[{send\-\_\-poll}]{\setlength{\rightskip}{0pt plus 5cm}void send\-\_\-poll (
\begin{DoxyParamCaption}
\item[{unsigned char}]{pid}
\end{DoxyParamCaption}
)}}\label{io_8h_a12f54d4bfb065f59a678e1506785cbbc}


Sends a poll for more data to the host-\/side driver. 

This results in additional data packages to be sent from the host-\/side driver. 
\begin{DoxyParams}{Parameters}
{\em pid} & Port, for which data is requested. \\
\hline
\end{DoxyParams}


\subsection{Variable Documentation}
\hypertarget{io_8h_ab88f6d9b1d25a690a29400b647e8f014}{\index{io.\-h@{io.\-h}!out\-Queue\-Size@{out\-Queue\-Size}}
\index{out\-Queue\-Size@{out\-Queue\-Size}!io.h@{io.\-h}}
\subsubsection[{out\-Queue\-Size}]{\setlength{\rightskip}{0pt plus 5cm}int out\-Queue\-Size}}\label{io_8h_ab88f6d9b1d25a690a29400b647e8f014}


current size of the output queue 

\begin{DoxyAuthor}{Author}
Thomas Fischer 
\end{DoxyAuthor}
\begin{DoxySince}{Since}
27.\-02.\-2013 
\end{DoxySince}
